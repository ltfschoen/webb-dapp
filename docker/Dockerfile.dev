FROM node:gallium-alpine

ARG NAME_PROJECT=${NAME_PROJECT}
ARG NAME_BRIDGE_DAPP=${NAME_BRIDGE_DAPP}
ARG NAME_STATS_DAPP=${NAME_STATS_DAPP}
ARG NAME_UI_COMPONENTS_DAPP=${NAME_UI_COMPONENTS_DAPP}
ARG PORT_BRIDGE_DAPP=${PORT_BRIDGE_DAPP}
ARG PORT_STATS_DAPP=${PORT_STATS_DAPP}
ARG PORT_UI_COMPONENTS_DAPP=${PORT_UI_COMPONENTS_DAPP}

ARG PATH_PROJECT=/usr/local/${NAME_PROJECT}

ENV PATH=${PATH_PROJECT}/node_modules/.bin:$PATH

WORKDIR ${PATH_PROJECT}

COPY package.json .

RUN apk update && apk add --update git
RUN yarn

COPY . .

EXPOSE ${PORT_BRIDGE_DAPP}
EXPOSE ${PORT_STATS_DAPP}
EXPOSE ${PORT_UI_COMPONENTS_DAPP}

CMD tail -f /dev/null
